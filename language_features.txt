# 上下颠倒文字转换器 - 语言功能说明

## 新增功能

1. **浏览器语言自动检测**
   - 自动检测用户浏览器语言设置
   - 根据检测结果重定向到相应语言版本
   - 支持英文(en)、中文(zh)和日语(ja)

2. **手动语言选择优先**
   - 用户手动选择语言后，停止自动检测
   - 通过cookie记住用户的语言选择
   - cookie有效期为30天

3. **防止重定向循环**
   - URL参数noautodetect防止自动检测循环
   - 已在正确语言页面时不会重复重定向
   - 全局标记redirectInProgress防止多次重定向

## 工作流程

1. 页面加载时检查URL参数，如果有noautodetect则跳过自动检测
2. 检查是否已有语言cookie，有则视为用户已选择语言
3. 如果没有cookie且未手动选择，则根据浏览器语言自动重定向
4. 用户通过下拉菜单手动选择语言时，设置cookie并标记为手动选择
5. 设置了手动选择标记后，后续访问不再自动检测语言

## 特别说明

- 在GitHub Pages和Cloudflare环境下，可能需要清除缓存才能看到更改生效
- 如遇重定向问题，可尝试手动添加?noautodetect=1到URL
- 调试模式可通过script.js中的debugMode变量控制

## 后续改进方向

- 添加更多语言支持
- 改进检测算法，支持复杂语言偏好（如zh-CN, zh-TW等）
- 优化重定向机制，减少页面闪烁 